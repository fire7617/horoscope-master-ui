(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92057792"],{7273:function(e,t,i){},a1a9:function(e,t,i){"use strict";i("7273")},aa12:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login"},[i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[i("h3",{staticClass:"title"},[e._v("星座後臺管理系統")]),i("h4",{staticClass:"title"},[e._v("忘記密碼")]),i("el-form-item",{attrs:{prop:"mobile"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"手機號碼"},model:{value:e.loginForm.mobile,callback:function(t){e.$set(e.loginForm,"mobile",t)},expression:"loginForm.mobile"}},[i("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"phone"},slot:"prefix"})],1)],1),i("el-form-item",{attrs:{prop:"smsCode"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{type:"text","auto-complete":"off",placeholder:"手機驗證碼"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.smsCode,callback:function(t){e.$set(e.loginForm,"smsCode",t)},expression:"loginForm.smsCode"}},[i("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),i("div",{staticClass:"login-code"},[i("el-button",{attrs:{type:"primary",round:"",disabled:e.smsTimeCount>0},on:{click:e.getSms}},[e._v(e._s(e.smsTimeCount?e.smsTimeCount+"秒後重新獲取":"獲取短信驗證碼"))])],1)],1),i("el-form-item",{attrs:{prop:"code"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off",placeholder:"驗證碼"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[i("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),i("div",{staticClass:"login-code"},[i("img",{staticClass:"login-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e.loading?i("span",[e._v("驗 證 中...")]):i("span",[e._v("驗 證")])]),i("div",{staticStyle:{float:"right"}},[i("router-link",{staticClass:"link-type",attrs:{to:"/login"}},[e._v("使用已有賬戶登錄")])],1)],1)],1),e._m(0)],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-login-footer"},[i("span",[e._v("Copyright © 2021 Talkmate by CFD (全富數位有限公司)")])])}],n=i("7ded"),l={name:"smsLogin",data:function(){return{codeUrl:"",loginForm:{mobile:"",smsCode:"",code:"",uuid:""},loginRules:{mobile:[{required:!0,trigger:"blur",message:"請輸入您的手機號碼"}],smsCode:[{required:!0,trigger:"blur",message:"請輸入您的手機驗證碼"}],code:[{required:!0,trigger:"blur",message:"請輸入圖形驗證碼"}]},getSmsRules:{mobile:[{required:!0,trigger:"blur",message:"請輸入您的手機號碼"}],code:[{required:!0,trigger:"blur",message:"請輸入圖形驗證碼"}]},loading:!1,captchaCount:0,captchaEnabled:!0,smsTimer:void 0,smsTimeInterval:1e3,smsTimeCount:0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCode()},methods:{getSms:function(){var e=this;this.loginForm.mobile?this.loginForm.code?Object(n["c"])(this.loginForm.mobile,"login",this.loginForm.code).then((function(t){200==t.code?e.startSmsTimer():e.$modal.msgError(t.message)})):this.$modal.msgError("請先輸入圖形驗證碼"):this.$modal.msgError("請先輸入手機號碼")},startSmsTimer:function(){var e=this;this.smsTimeCount=60,this.smsTimer||(this.smsTimer=setInterval((function(){e.smsTimeCount>0&&(e.smsTimeCount--,e.smsTimeCount<=0&&(clearInterval(e.smsTimer),e.smsTimer=null))}),this.smsTimeInterval))},getCode:function(){this.captchaEnabled&&(this.codeUrl="/prod-api/verifycode/index?v="+this.captchaCount++)},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,e.$store.dispatch("SmsLogin",e.loginForm).then((function(){e.$router.push({path:"/changePassword"}).catch((function(){}))})).catch((function(){e.loading=!1,e.captchaEnabled&&e.getCode()})))}))}}},r=l,a=(i("a1a9"),i("2877")),c=Object(a["a"])(r,o,s,!1,null,null,null);t["default"]=c.exports}}]);